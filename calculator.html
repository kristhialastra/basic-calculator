<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    

    <title>Calculator</title>
    <link href="calculator.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Shrikhand&family=Sriracha&family=Varela+Round&display=swap" rel="stylesheet">
   
</head>



<!-- header section -->
<video class="video-bg" autoplay muted loop>
  <source src="lv_0_20230403235316.mp4">
</video>

<div class="cursor site-wide">
  <div class="pointer"></div>
</div>



<br></br>
<br></br>
<br></br>
<br></br>
<br></br>
	 <div class="layout"> 
    <div class="calculator">
        <div class="output">
            <div data-previous class="previous"></div>
            <div data-current class="current"></div>
        </div>
        <button onmousedown="sound1.play()" data-clear class="span-two" class="bp">Clear</button>
        <button onmousedown="sound1.play()" data-delete class="bp">Del</button>
        <button onmousedown="sound1.play()" data-operation class="bp">รท</button>
        <button onmousedown="sound1.play()" data-number class="bw">1</button>
        <button onmousedown="sound1.play()" data-number class="bw">2</button>
        <button onmousedown="sound1.play()" data-number class="bw">3</button>
        <button onmousedown="sound1.play()" data-operation class="bp">*</button>
        <button onmousedown="sound1.play()" data-number class="bw">4</button>
        <button onmousedown="sound1.play()" data-number class="bw">5</button>
        <button onmousedown="sound1.play()" data-number class="bw">6</button>
        <button onmousedown="sound1.play()" data-operation class="bp">+</button>
        <button onmousedown="sound1.play()" data-number class="bw">7</button>
        <button onmousedown="sound1.play()" data-number class="bw">8</button>
        <button onmousedown="sound1.play()" data-number class="bw">9</button>
        <button onmousedown="sound1.play()" data-operation class="bp">-</button>
        <button onmousedown="sound1.play()" data-number class="bw">.</button>
        <button onmousedown="sound1.play()" data-number class="bw">0</button>
        <button onmousedown="sound1.play()" data-equals class="span-two" class="bp">=</button>
    </div>
	</div>

  <script type="text/javascript">
    const cursor = document.querySelector(".cursor");
    var timeout;

    //follow cursor on mousemove
    document.addEventListener("mousemove", (e) => {
      let x = e.pageX;
      let y = e.pageY;

      cursor.style.top = y + "px";
      cursor.style.left = x + "px";
      cursor.style.display = "block";

      //cursor effects when mouse stopped
      function mouseStopped(){
        cursor.style.display = "none";
      }
      clearTimeout(timeout);
      timeout = setTimeout(mouseStopped, 1000);
    });

    //cursor effects when mouseout
    document.addEventListener("mouseout", () => {
      cursor.style.display = "none";
    });
    </script>

  <script>
  var sound1 = new Audio();
  sound1.src = "./lv_0_20230408210338.mp3"
  </script>
  
  <script>
    
class Calculator{
	constructor(previousTextElement, currentTextElement) {
		this.previousTextElement = previousTextElement
		this.currentTextElement = currentTextElement
		this.clear()
	}
	
	clear(){
			this.current = ''
			this.previous = ''
			this.operation = undefined
	}
	
	delete(){
			this.current = this.current.toString().slice(0, -1)
	}
	
	appendNumber(number) {  
	    if (number === '.' && this.current.includes('.')) return;
        this.current = this.current.toString() + number.toString()
  }
	
 chooseOperation(operation) {
    if (this.current === '') return
    if (this.previous !== '') {
      this.compute()
    }

    this.operation = operation
    this.previous = this.current
    this.current = ''
  }
	
compute() {
    let computation
    const prev = parseFloat(this.previous)
    const current = parseFloat(this.current)
    if (isNaN(prev) || isNaN(current)) return
    
    switch (this.operation) {
      case '+':
        computation = prev + current
        break
      case '-':
        computation = prev - current
        break
      case '*':
        computation = prev * current
        break
      case 'รท':
        computation = prev / current
        break
      default:
        return
    }
    this.current = computation.toString()
    this.operation = undefined
    this.previous = ''
  }
	
getDisplayNumber(number) {
	
	let str = ''
	const arr = number.split('.')
	
	for(let i in arr[0]){
		if(Number(i) !== 0 && i%3 === 0) str += ''
		str += arr[0][i]
	}
	
	if(number.endsWith('.')) str += '.'
	if(arr[1]) str += '.'+arr[1]
	
	return str
}
	
updateDisplay() {
    this.currentTextElement.innerText =
      this.getDisplayNumber(this.current)
    if (this.operation) {
      this.previousTextElement.innerText =
        `${this.getDisplayNumber(this.previous)} ${this.operation}`
    } else {
      this.previousTextElement.innerText = ''
    }
  }
}

const numberButtons = document.querySelectorAll('[data-number]')
const operationButtons = document.querySelectorAll('[data-operation]')

const equalsButton = document.querySelector('[data-equals]')
const deleteButton = document.querySelector('[data-delete]')
const clearButton = document.querySelector('[data-clear]')

const previousTextElement = document.querySelector('[data-previous]')
const currentTextElement = document.querySelector('[data-current]')



const calculator = new Calculator(previousTextElement, currentTextElement)


numberButtons.forEach(button => {
  button.addEventListener('click', () => {
    calculator.appendNumber(button.innerText)
    calculator.updateDisplay()
  })
})

operationButtons.forEach(button => {
  button.addEventListener('click', () => {
    calculator.chooseOperation(button.innerText)
    calculator.updateDisplay()
  })
})

equalsButton.addEventListener('click', button => {
  calculator.compute()
  calculator.updateDisplay()
})

clearButton.addEventListener('click', button => {
  calculator.clear()
  calculator.updateDisplay()
})

deleteButton.addEventListener('click', button => {
  calculator.delete()
  calculator.updateDisplay()
})
  </script>

  
</body>
</html>

